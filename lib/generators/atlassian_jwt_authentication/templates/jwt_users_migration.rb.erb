class CreateAtlassianJwtUsers < ActiveRecord::Migration
  def self.up
    if table_exists? :jwt_users
      pp 'Skipping jwt_users table creation...'
    else
      create_table :jwt_users do |t|
        t.integer :jwt_token_id
        t.string :user_key
        t.string :name
        t.string :display_name
        t.string :account_id
      end

      add_index :jwt_users, [:user_key, :jwt_token_id], unique: true
      add_index :jwt_users, [:account_id, :jwt_token_id], unique: true
    end
  end
end